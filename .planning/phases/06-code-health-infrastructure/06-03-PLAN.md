---
phase: 06-code-health-infrastructure
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/stores/panelStore.ts
  - src/components/transcripts/SyncTab.tsx
autonomous: true

must_haves:
  truths:
    - "panelStore has zero 'any' types"
    - "SyncTab has proper Meeting and Job interfaces"
    - "TypeScript strict mode passes for both files"
  artifacts:
    - path: "src/stores/panelStore.ts"
      provides: "Properly typed panel store"
      contains: "PanelData"
    - path: "src/components/transcripts/SyncTab.tsx"
      provides: "Properly typed sync component"
  key_links:
    - from: "src/stores/panelStore.ts"
      to: "src/types/panel.ts"
      via: "type import"
      pattern: "import.*PanelData"
---

<objective>
Tighten types in panelStore and SyncTab.tsx

Purpose: Remove 'any' types to improve type safety and catch bugs at compile time (REFACTOR-03, REFACTOR-06)
Output: Properly typed store interfaces and component props with no 'any' usage
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/stores/panelStore.ts
@src/components/transcripts/SyncTab.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Type panelStore properly</name>
  <files>
    src/stores/panelStore.ts
    src/types/panel.ts
  </files>
  <action>
1. Create or extend `src/types/panel.ts` with discriminated union for panel data:

```typescript
export type PanelData =
  | { type: 'call-detail'; recordingId: number; title?: string }
  | { type: 'folder-detail'; folderId: string }
  | { type: 'tag-detail'; tagId: string }
  | { type: 'user-detail'; userId: string }
  | { type: 'workspace-detail'; workspaceId: string }
  | { type: 'bulk-actions'; selectedIds: string[] }
  | { type: 'setting-help'; section: string }
  | { type: 'settings'; tab?: string }
  | { type: 'filter-tool' }
  | { type: 'ai-assistant' }
  | { type: 'inspector' }
  | { type: 'sorting' }
  | null;
```

2. Update panelStore.ts:
   - Replace `panelData: any` with proper `PanelData` type
   - Replace `panelHistory: Array<{ type: PanelType; data: any }>` with typed history
   - Update `openPanel` signature to enforce type-safe data

3. Verify all panel open calls in codebase pass correct data shape:
   - `grep -r "openPanel" src/` to find all usages
   - Update callers if needed to provide correct type discriminator

4. Run typecheck to verify no regressions
  </action>
  <verify>
    - `grep -n "any" src/stores/panelStore.ts` returns no results
    - `npm run typecheck` passes
  </verify>
  <done>
    panelStore has zero 'any' types, uses discriminated union for type-safe panel data
  </done>
</task>

<task type="auto">
  <name>Task 2: Type SyncTab.tsx properly</name>
  <files>
    src/components/transcripts/SyncTab.tsx
    src/types/sync.ts
  </files>
  <action>
1. Analyze SyncTab.tsx for loose/missing types:
   - Check Meeting type usage
   - Check Job/SyncJob type usage
   - Look for inline `as any` casts

2. Create `src/types/sync.ts` if needed with:
   - SyncJob interface (id, status, started_at, completed_at, etc.)
   - SyncStatus enum/union
   - Any other sync-specific types

3. Update SyncTab.tsx:
   - Import proper types
   - Remove any `as any` casts
   - Add proper function parameter types
   - Add proper return types

4. Check related components that SyncTab uses and ensure type propagation

5. Run typecheck to verify
  </action>
  <verify>
    - `grep -n ": any\|as any" src/components/transcripts/SyncTab.tsx` returns no results
    - `npm run typecheck` passes
  </verify>
  <done>
    SyncTab.tsx has proper Meeting and Job interfaces, no loose types
  </done>
</task>

</tasks>

<verification>
1. `grep -n "any" src/stores/panelStore.ts` returns 0 matches
2. `grep -n ": any\|as any" src/components/transcripts/SyncTab.tsx` returns 0 matches
3. `npm run typecheck` passes
4. `npm run build` passes
</verification>

<success_criteria>
- panelStore.ts has zero 'any' types
- SyncTab.tsx has proper interfaces for Meetings and Jobs
- Discriminated union pattern used for panel data
- All callers of openPanel updated if needed
- TypeScript builds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-code-health-infrastructure/06-03-SUMMARY.md`
</output>
