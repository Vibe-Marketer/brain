---
phase: 08-growth-infrastructure
plan: 05
type: execute
wave: 2
depends_on: ["08-04"]
files_modified:
  - src/pages/ManualImport.tsx
  - src/components/import/YouTubeImportForm.tsx
  - src/components/import/ImportProgress.tsx
  - src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to Manual Import page"
    - "User can paste YouTube URL and click Import"
    - "User sees step-by-step progress during import"
    - "After successful import, user can navigate to the new call"
    - "YouTube imports are visually distinct from Zoom/Meet calls"
  artifacts:
    - path: "src/pages/ManualImport.tsx"
      provides: "Manual import page"
      min_lines: 50
    - path: "src/components/import/YouTubeImportForm.tsx"
      provides: "YouTube URL input form"
      min_lines: 60
    - path: "src/components/import/ImportProgress.tsx"
      provides: "Step progress indicator"
      min_lines: 40
  key_links:
    - from: "src/components/import/YouTubeImportForm.tsx"
      to: "youtube-import"
      via: "supabase.functions.invoke"
      pattern: "invoke.*youtube-import"
    - from: "src/App.tsx"
      to: "src/pages/ManualImport.tsx"
      via: "Route definition"
      pattern: "ManualImport"
---

<objective>
Create YouTube import UI with Manual Import page and progress tracking.

Purpose: Users can import YouTube videos as call transcripts with clear progress feedback (GROW-03).
Output: ManualImport page, YouTubeImportForm component, ImportProgress component, route registration.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-growth-infrastructure/08-CONTEXT.md
@.planning/phases/08-growth-infrastructure/08-RESEARCH.md
@.planning/phases/08-growth-infrastructure/08-04-SUMMARY.md
@src/CLAUDE.md
@src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ImportProgress and YouTubeImportForm components</name>
  <files>
src/components/import/ImportProgress.tsx
src/components/import/YouTubeImportForm.tsx
  </files>
  <action>
**ImportProgress.tsx:**
Create step progress indicator component per CONTEXT.md: "Fetching -> Transcribing -> Processing -> Done"

Props:
- currentStep: 'idle' | 'validating' | 'checking' | 'fetching' | 'transcribing' | 'processing' | 'done' | 'error'
- error?: string

Display 4 main steps with visual indicators:
1. Fetching Metadata (active when validating/checking/fetching)
2. Transcribing (active when transcribing)  
3. Processing (active when processing)
4. Done (active when done)

Use Remix icons for step states:
- Completed: RiCheckLine with green
- Active: RiLoader4Line with animation (spin)
- Pending: RiCircleLine with muted color
- Error: RiErrorWarningLine with red

Show error message if currentStep === 'error'

**YouTubeImportForm.tsx:**
Create form component for YouTube URL input.

Props:
- onSuccess: (recordingId: number, title: string) => void
- onError: (error: string) => void

State:
- url: string
- isImporting: boolean
- currentStep: ImportStep

UI Elements:
1. Input field for YouTube URL (full width, placeholder: "Paste YouTube URL here...")
2. Import button (disabled during import)
3. ImportProgress component showing current step

On submit:
1. Set isImporting = true, currentStep = 'validating'
2. Call youtube-import Edge Function
3. Update currentStep based on response.step
4. On success: call onSuccess with recordingId and title
5. On error: set currentStep = 'error', call onError

Include URL format hints below input field.
Handle paste event to auto-detect YouTube URLs.
  </action>
  <verify>
Files exist: `ls src/components/import/ImportProgress.tsx src/components/import/YouTubeImportForm.tsx`
ImportProgress displays 4 steps
YouTubeImportForm calls youtube-import function
  </verify>
  <done>
ImportProgress shows visual step tracking. YouTubeImportForm handles input, submission, and progress updates.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ManualImport page and register route</name>
  <files>
src/pages/ManualImport.tsx
src/App.tsx
  </files>
  <action>
**ManualImport.tsx:**
Create dedicated page for manual imports per CONTEXT.md: "Separate 'Manual Import' page (not on Sync page)"

Use AppShell layout (MANDATORY per src/CLAUDE.md).

Page structure:
1. Header: "Import Content" with brief description
2. YouTubeImportForm component
3. Success state: Show imported video title with "View Call" button
4. Recent imports section (optional for MVP - can show last 5 YouTube imports)

On successful import:
- Show success toast via sonner
- Display imported video title and thumbnail (if available from response)
- Provide "View Call" link to /call/:recordingId

Styling:
- Center content with max-width for comfortable reading
- Use brand guidelines typography (Montserrat headings, Inter body)
- Card container for form area

**App.tsx:**
Add route for ManualImport page:
```tsx
<Route path="/import" element={<ManualImport />} />
```

Ensure route is protected (requires auth) - follow existing route patterns.
  </action>
  <verify>
ManualImport.tsx uses AppShell
Route /import exists in App.tsx
Page renders YouTubeImportForm
  </verify>
  <done>
ManualImport page accessible at /import, uses AppShell, contains YouTubeImportForm with success state handling.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add navigation to Manual Import</name>
  <files>src/components/layout/NavRail.tsx</files>
  <action>
Add navigation link to Manual Import page from sidebar.

Find NavRail.tsx (the sidebar navigation component).
Add a new nav item:
- Label: "Import"
- Icon: RiUpload2Line or RiYoutubeLine
- Path: /import
- Position: Near Sync page (logical grouping with content acquisition)

Follow existing nav item patterns in the file.
Ensure proper active state highlighting when on /import route.
  </action>
  <verify>
NavRail includes Import nav item
Import link points to /import
Icon is appropriate (upload or YouTube themed)
  </verify>
  <done>
Users can navigate to Manual Import page from sidebar. Nav item shows active state when on /import.
  </done>
</task>

</tasks>

<verification>
1. /import route loads ManualImport page
2. YouTubeImportForm accepts URL and shows progress
3. ImportProgress displays step states correctly
4. Successful import shows title and View link
5. Navigation accessible from sidebar
6. Page uses AppShell layout
</verification>

<success_criteria>
- User can navigate to /import from sidebar
- User can paste YouTube URL and see step-by-step progress
- Successful imports show video title with link to view
- Error states display helpful messages
- UI follows brand guidelines
</success_criteria>

<output>
After completion, create `.planning/phases/08-growth-infrastructure/08-05-SUMMARY.md`
</output>
