---
phase: 16.1-workspace-polish-brand-guidelines
plan: "01"
subsystem: ui
tags: [layout, animation, spring, motion, appshell, detail-pane, org-switcher]

requires:
  - phase: 16-workspace-redesign
    provides: AppShell component, DetailPaneOutlet, OrgSwitcherBar, panelStore

provides:
  - DetailPaneOutlet with width-only spring animation (no x-offset drawer feel)
  - RiCloseLine close button in flex-flow header (not clipped by overflow-hidden)
  - AppShell with bg-viewport on root so pane gaps show viewport background
  - Consistent border-border/60 on all 4 panes (Pane 3 was using full border-border)
  - OrgSwitcherBar using bg-viewport, no border-b, no backdrop-blur — integrates with shell

affects:
  - 16.1-02 through 16.1-04 (all future plans use same AppShell + DetailPaneOutlet)

tech-stack:
  added: []
  patterns:
    - "Same-plane push: DetailPaneOutlet uses width-only animation in flex parent — no x offset, no overlay"
    - "Close button in flex-flow: avoid absolute positioning inside overflow-hidden containers"
    - "OrgSwitcherBar as shell chrome: uses bg-viewport not bg-card, blends with shell not panes"

key-files:
  created: []
  modified:
    - /Users/Naegele/dev/callvault/src/components/layout/DetailPaneOutlet.tsx
    - /Users/Naegele/dev/callvault/src/components/layout/AppShell.tsx
    - /Users/Naegele/dev/callvault/src/components/layout/OrgSwitcherBar.tsx

key-decisions:
  - "Remove x:20 from DetailPaneOutlet initial/exit — drawer-slide feel eliminated, width-only spring creates same-plane push"
  - "Close button moved to flex-flow header row — absolute positioning inside overflow-hidden clips the button"
  - "OrgSwitcherBar uses bg-viewport (no border-b, no backdrop-blur) — bar is shell chrome not a pane"
  - "Pane 3 border changed from border-border to border-border/60 for consistency across all 4 panes"

patterns-established:
  - "Pane close buttons: always in flex-flow, never absolutely positioned inside overflow-hidden panes"
  - "Shell chrome (OrgSwitcherBar) uses bg-viewport to blend with the shell background"

duration: 2min
completed: "2026-02-28"
---

# Phase 16.1 Plan 01: AppShell Animation + Visual Cohesion Summary

**Width-only spring animation on DetailPaneOutlet eliminates drawer feel, OrgSwitcherBar integrated as shell chrome using bg-viewport, and all 4 panes now use consistent border-border/60**

## Performance

- **Duration:** ~2 min
- **Started:** 2026-02-28T21:44:38Z
- **Completed:** 2026-02-28T21:46:17Z
- **Tasks:** 2
- **Files modified:** 3

## Accomplishments

- Eliminated the "drawer slide" feel: removed `x: 20` from DetailPaneOutlet initial/exit keyframes — Pane 4 now animates width-only via spring, pushing Pane 3 on the same flex plane
- Fixed close button clipping: moved from `absolute top-3 right-3` (clipped by `overflow-hidden`) to a flex-flow header row; replaced raw `&#x2715;` with `RiCloseLine` from Remix Icon
- AppShell root now has `bg-viewport` so the `p-1` padding and `gap-3` gaps between panes show the viewport background (#FCFCFC light / #161616 dark), matching v1's visual treatment
- All 4 panes now consistently use `border-border/60` (Pane 3 was the only one using full-opacity `border-border`)
- OrgSwitcherBar no longer looks "floating": uses `bg-viewport` instead of `bg-card/80 backdrop-blur-sm`, no `border-b` separator — it blends into the shell background

## Task Commits

1. **Task 1: Fix DetailPaneOutlet same-plane push animation** - `69854de` (fix)
2. **Task 2: Polish AppShell and OrgSwitcherBar visual integration** - `9f36bec` (fix)

## Files Created/Modified

- `src/components/layout/DetailPaneOutlet.tsx` — Width-only spring animation, RiCloseLine close button in flex-flow header row
- `src/components/layout/AppShell.tsx` — Added bg-viewport to root container, fixed Pane 3 border to border-border/60
- `src/components/layout/OrgSwitcherBar.tsx` — bg-viewport, removed border-b and backdrop-blur-sm for shell integration

## Decisions Made

- **Width-only animation:** The `x: 20` offset was causing the panel to visually "slide in from the right" like a drawer. Removing it means the panel grows from 0 width using the spring, and the flex parent reflowing Pane 3's space creates the same-plane push. SPRING config unchanged (stiffness 260, damping 28).
- **Close button placement:** `absolute` positioning inside an `overflow-hidden` container clips any element that falls outside the content box. Moving to a flex-flow `<div>` with `justify-end` solves this cleanly without needing `overflow-visible` or z-index tricks.
- **OrgSwitcherBar as shell chrome:** The bar sits between the viewport edge and the pane row. Using `bg-viewport` (not `bg-card`) makes it part of the shell background rather than a pane-like element. No `border-b` means there's no hard separator — the p-1 gap between bar and panes provides natural visual breathing room.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- DetailPaneOutlet same-plane push is ready for Plan 02-04 which will add real panel content
- AppShell visual treatment is cohesive and matches v1's feel
- All pane borders consistent, viewport background visible through gaps

## Self-Check: PASSED

- FOUND: DetailPaneOutlet.tsx
- FOUND: AppShell.tsx
- FOUND: OrgSwitcherBar.tsx
- FOUND: 16.1-01-SUMMARY.md
- Commits verified: 69854de, 9f36bec

---
*Phase: 16.1-workspace-polish-brand-guidelines*
*Completed: 2026-02-28*
