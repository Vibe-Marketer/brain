# Phase 16.2: V2 Visual Alignment with V1 - Research

**Researched:** 2026-03-01
**Domain:** CSS/Design system alignment, TailwindCSS v4, React component styling
**Confidence:** HIGH

---

<user_constraints>
## User Constraints (from CONTEXT.md)

### Locked Decisions
- ALL pages in V2 get aligned — no page is skipped
- Pages that exist in both V1 and V2: match V1 exactly
- V2-only pages (workspace management, onboarding, org switcher): must match V1's visual language
- Pages V1 had but V2 dropped (AI Chat, Content Hub, Hubs, Analytics): stay dropped, not in scope
- **Exact match standard**: Same colors, same spacing, same font sizes, same component styling — side-by-side should look identical
- Vibe orange: match V1's 14 documented structural contexts silently — add where V1 has it, remove where V1 doesn't
- Show BOTH: V1 vs V2 side-by-side AND V2 before/after fixes — full visual evidence
- Light mode only — dark mode is NOT in scope
- Fix everything in one sweep — no batching by severity

### Claude's Discretion
- Page order (tackle most broken first vs user journey order)
- Verification flow (page-by-page fix+verify vs fix-all-then-verify)
- Animation tuning (only adjust if V2 springs feel noticeably different from V1 transitions)
- Technical approach for each fix (CSS changes, component refactors, token updates)

### Deferred Ideas (OUT OF SCOPE)
- Dark mode alignment
- create-brand-skill
</user_constraints>

---

## Summary

V2 was built as a clean architectural rewrite — new routing, new state management, new component system. The CSS token system in `globals.css` is largely correct and well-formed. However, the **visual rendering diverges from V1 in several key ways** that are visible in side-by-side comparison.

The biggest gaps are: (1) V1 uses a completely different layout system (TopBar + floating MainCard vs V2's 4-pane AppShell), (2) V1's sidebar uses glossy 3D icon buttons while V2 uses flat text nav, (3) V1's page headings use vibe orange while V2 uses standard foreground, (4) button styles are not yet implemented as the brand-specified shadcn/ui variants — they're mostly ad-hoc inline classes, and (5) there is no `<Button>` component file in V2 at all (no `src/components/ui/` directory).

**Primary recommendation:** Most of the alignment work is component-level styling, not token changes. The globals.css tokens are mostly correct. The gaps are in how components render those tokens.

---

## What V1 Looks Like (from Screenshots)

These findings come from the V1 audit screenshots stored at `~/.config/claude-code/dev-browser/tmp/v1-*.png`.

### V1 Home Page (v1-01-home.png)
- **Layout:** TopBar (full-width, white, ~52px) with CALLVAULT logo top-left, "HOME" heading in VIBE ORANGE center-top, workspace switcher + icons top-right
- **Main card:** White, rounded corners, with thin border, sitting on very light gray viewport
- **Primary sidebar:** Left sidebar ~220px, white background, contains: orange IMPORT button at top, then nav items with left-edge orange pill for active, icons + labels
- **Secondary pane:** "LIBRARY" panel with folders list
- **Content:** Transcripts table, filter bar with pill buttons (Date, Tag, Folder, Participants, Duration)
- **Page title:** "TRANSCRIPTS" in uppercase, vibe orange color — NOT the standard foreground black
- **Call title hover:** Turns vibe orange (text-brand-400)

### V1 Settings Page (v1-08-settings.png)
- **Same layout:** TopBar + 4-pane-like structure
- **Settings sidebar:** Active item has orange left-edge pill indicator + orange icon
- **Page title:** "SETTINGS" in orange (vibe orange), uppercase
- **Content area:** Clean, no container cards except form fields

### V1 Import Page (v1-09-import.png)
- **Same layout:** TopBar visible
- **Page title:** "IMPORT CONTENT" subtitle, icon in orange
- **Content:** Centered form with search input styled with orange focus border

---

## Architecture Gap: V1 Layout vs V2 Layout

This is the **most fundamental structural difference** between V1 and V2.

### V1 Layout (legacy Card-on-Viewport)
```
Full-width TopBar (52px, white, logo + title + user controls)
└── Main floating card (inset 8px, rounded-2xl, white)
     └── Left sidebar (220px) | Content area (flex-1)
```
V1 uses a **single-card layout** where the sidebar and content are inside one shared white card.

### V2 Layout (AppShell 4-pane)
```
OrgSwitcherBar (40px, bg-viewport)
└── Pane container (flex row, gap-3, p-1)
     ├── Pane 1: NavRail (72-220px, bg-card, rounded-2xl)
     ├── Pane 2: Secondary (0-280px, bg-card/80, rounded-2xl)
     ├── Pane 3: Main content (flex-1, bg-card, rounded-2xl)
     └── Pane 4: Detail (0-360px, bg-card, rounded-2xl)
```
V2 uses **separate rounded panes** with gaps between them, each on the same bg-viewport background.

**Decision from CONTEXT.md (brand-guidelines-v4.4.md section on v2 AppShell):** The v2 4-pane layout IS the approved target. The brand guidelines explicitly document the v2 AppShell structure with pane gaps and individual rounded cards. This IS the approved V2 visual language, not the V1 Card-on-Viewport system.

**Implication for research:** V1's layout IS different from V2's layout by design. The alignment goal is NOT to revert V2's pane structure to V1's floating card. The alignment goal is the **visual language within and between panes** — colors, typography, nav styling, orange usage.

---

## Standard Stack

### Core Files to Modify

| File | Purpose | Scope of Change |
|------|---------|----------------|
| `callvault/src/globals.css` | All color tokens, button utilities | Token tweaks only — mostly correct |
| `callvault/src/components/layout/SidebarNav.tsx` | Primary nav rail | Active state styling |
| `callvault/src/components/layout/OrgSwitcherBar.tsx` | Org switcher header bar | Minor styling |
| `callvault/src/components/layout/AppShell.tsx` | 4-pane shell | Pane background + border tweaks |
| `callvault/src/routes/_authenticated/index.tsx` | Home / calls list | Page header, table row styling |
| `callvault/src/routes/_authenticated/calls/$callId.tsx` | Call detail | Header, metadata styling |
| `callvault/src/routes/_authenticated/settings/$category.tsx` | Settings | Sidebar active states |
| `callvault/src/routes/_authenticated/import/index.tsx` | Import | Tab styling, button variants |
| `callvault/src/routes/_authenticated/workspaces/index.tsx` | Workspace mgmt | Cards, empty states |
| `callvault/src/routes/login.tsx` | Login page | Button gradient |

### Missing Infrastructure

| Missing | Impact | Fix |
|---------|--------|-----|
| `src/components/ui/` directory | No shadcn/ui component files exist | Need `button.tsx`, `tabs.tsx`, `badge.tsx` |
| `Button` component | All buttons are ad-hoc inline classes | Create shadcn Button with brand variants |
| `Tabs` component | No Radix Tabs component file | Create with brand spec (6px orange pill) |
| Font loading | Montserrat and Inter not verified in index.html | Check `callvault/index.html` |

---

## Gap Analysis: V2 vs Brand Spec

### Gap 1: Page Title Color (HIGH IMPACT)

**V1:** Page/section titles appear in **vibe orange** — e.g., "HOME", "SETTINGS", "TRANSCRIPTS" rendered in `#FF8800`
**V2 current:** `text-foreground` (black `#111111`)
**Brand guidelines v4.4:** Typography section says "Page titles" use Montserrat Extra Bold ALL CAPS — does NOT specify orange color for page titles in the v2 section. However the Navigation & Selection States section and v1 screenshots both show orange headings.

**Verdict:** V1 uses orange for page section headings (in the TopBar center and in-pane titles). V2 should match. The orange title is a structural navigation indicator (current page label), which qualifies as an approved vibe orange context.

**Files to fix:** All route components that render `<h1>` page titles.

### Gap 2: SidebarNav — Missing Collapsed Icon Styling (HIGH IMPACT)

**V1 sidebar (collapsed):** Glossy 3D icon buttons — `bg-gradient-to-br from-white to-gray-200`, inner shadow, `w-11 h-11 rounded-xl`, with orange dot indicator below active icon.
**V2 SidebarNav (collapsed):** Flat icons, `justify-center px-2 py-2`, no gradient, no 3D effect, no dot indicator.
**Brand guidelines v4.4:** "Navigation Icons (SidebarNav)" section explicitly specifies glossy 3D icon buttons for the sidebar nav icons.

**Files to fix:** `SidebarNav.tsx` — add glossy treatment when `isCollapsed`.

### Gap 3: SidebarNav — Active State Text Color (MEDIUM IMPACT)

**V1 active nav item:** Orange label text + orange icon + pill
**V2 active nav item:** `text-foreground` (black) + orange icon + pill
**Brand guidelines v4.4:** Selection state says `font-semibold text-vibe-orange` for active text.
**V2 current code:** `bg-vibe-orange/10 font-medium text-foreground` — text stays black.

**Files to fix:** `SidebarNav.tsx` — change `text-foreground` to `text-vibe-orange` for active items.

### Gap 4: Settings Sidebar — Missing Active State Treatment (HIGH IMPACT)

**V1 settings sidebar:** Active category shows orange left-pill + orange icon + orange text
**V2 settings sidebar:** Active category shows `bg-muted text-foreground font-medium` (gray bg, black text, no pill, no orange icon)

**Files to fix:** `settings/$category.tsx` — SettingsSidebar component needs full 4-layer selection state.

### Gap 5: No Button Component (HIGH IMPACT)

**V1 buttons:** Branded variants — slate gradient primary, hollow secondary, etc.
**V2 current:** No `src/components/ui/button.tsx` exists. All buttons are inline Tailwind classes.
**Brand guidelines v4.4:** Button system has 6 variants fully specified (default/slate gradient, hollow, destructive, link, outline, ghost).

The login page implements the slate gradient directly in JSX with inline classes — this is the right visual result but wrong pattern (not reusable).

**Files to create:** `src/components/ui/button.tsx` with all 6 variants per brand spec.

### Gap 6: No Tabs Component (MEDIUM IMPACT)

**V1 tabs:** Vibe orange 6px rounded pill underline on active tab, full-width black underline bar, left-justified, UPPERCASE labels, Inter Light inactive / Inter Semibold active.
**V2 current:** Import page has custom button-based tabs (`border-b-2 border-vibe-orange`) which matches the alternative pattern. No Radix Tabs component exists.

**Files to create:** `src/components/ui/tabs.tsx` for pages that will need it (call detail page tabs, any future pages).

### Gap 7: Heading Typography — Font Loading (MEDIUM IMPACT)

**V1:** Montserrat Extra Bold for ALL page headings — visually distinct from body text.
**V2 current:** `font-montserrat` class is used in heading tags (h1, h2) in routes. The CSS `@theme` block declares `--font-montserrat: "Montserrat", sans-serif`. However, Montserrat must be loaded from Google Fonts.

**Files to check:** `callvault/index.html` — verify font link is there. If not, Inter fallback is silently used.

### Gap 8: Call Row — Hover Color (LOW IMPACT)

**V1 call list:** Title turns orange on row hover.
**V2 current:** `group-hover:text-brand-400` — this IS brand-400 (vibe orange). Correct.

**Verdict:** This gap does NOT exist. V2 already has correct behavior.

### Gap 9: OrgSwitcherBar Background (LOW IMPACT)

**V1:** No equivalent component — org switching was in the TopBar workspace switcher
**V2:** `bg-viewport` — matches brand guidelines v4.4 spec for OrgSwitcherBar.
**Verdict:** V2-only component, already follows brand spec correctly.

### Gap 10: Pane Borders (LOW IMPACT)

**V2 current:** `border border-border/60` (60% opacity border)
**Brand guidelines v4.4:** `border border-border/60` for panes
**Verdict:** Already correct. No change needed.

### Gap 11: Loading Spinner Color (LOW IMPACT)

**V2 current:** `border-brand-400 border-t-transparent animate-spin` — vibe orange spinner
**Brand spec:** Orange spinners are acceptable (circular progress indicator = approved vibe orange context #5)
**Verdict:** Correct. No change needed.

### Gap 12: WorkspaceSidebarPane — Folder Active State (MEDIUM IMPACT)

**V2 current:** Active folder shows `bg-muted text-foreground font-medium` with `RiFolderOpenLine` in `text-brand-400`.
**Brand spec:** Active folder should use full selection state — `bg-vibe-orange/10`, pill indicator, fill icon in `text-vibe-orange`.
**Files to fix:** `WorkspaceSidebarPane.tsx` — FolderItem active state.

### Gap 13: Import Page Tabs (LOW IMPACT)

**V2 current:** Custom button tabs with `border-b-2 border-vibe-orange` for active state.
**Brand spec:** Alternative button-based tabs pattern — "active state: `border-b-2 border-vibe-orange text-foreground`" — this is exactly what V2 has.
**Verdict:** Already correct. No change needed.

### Gap 14: Empty States — Microcopy Tone (LOW IMPACT)

**V1:** Personality-driven empty states ("Nothing here yet — let's record some magic")
**V2 current:** Functional: "No calls found. Import calls to get started."
**Brand spec:** Warm, encouraging tone for empty states.
**Files to fix:** Route-level empty state copy — soft change, low priority.

---

## Architecture Patterns

### V2 File Modification Strategy

**Pattern 1: CSS token adjustments** — `globals.css` only
Used when a token value needs to change (e.g., sidebar background, button gradient)

**Pattern 2: Component-level class changes** — modify `.tsx` files directly
Used when inline Tailwind classes in JSX need to be updated to match brand spec

**Pattern 3: New component creation** — create `src/components/ui/button.tsx`, `tabs.tsx`
Used when a shared component is missing and multiple pages need it

**Pattern 4: TailwindCSS v4 custom utilities** — `@layer components {}` in `globals.css`
Used for reusable patterns that don't warrant a React component (e.g., `.cv-side-indicator-pill` already exists)

### TailwindCSS v4 Critical Constraints

V2 uses TailwindCSS v4 (CSS-first). Key rules for this phase:

```css
/* CORRECT: hsl() wrapped values */
--color-vibe-orange: hsl(32 100% 50%);

/* WRONG: raw HSL values */
--color-vibe-orange: 32 100% 50%;

/* CORRECT: @theme for brand tokens → Tailwind utilities */
@theme {
  --color-vibe-orange: hsl(32 100% 50%);
}
/* generates bg-vibe-orange, text-vibe-orange, border-vibe-orange */

/* CORRECT: @theme inline for semantic tokens → utilities */
@theme inline {
  --color-primary: var(--primary);
}
/* generates bg-primary, text-primary etc. from CSS variables */

/* WRONG: tailwind.config.js — never create this file */
```

**No `tailwind.config.js` ever** — this is a hard constraint per `callvault/CLAUDE.md`.

### shadcn/ui Component Pattern for V2

When creating `button.tsx` or `tabs.tsx`, they must follow the shadcn/ui pattern that works with TailwindCSS v4:

```tsx
// Use cn() helper from @/lib/utils (already exists)
import { cn } from '@/lib/utils'

// Use cva for variant management
import { cva, type VariantProps } from 'class-variance-authority'

// Reference CSS variables via Tailwind semantic tokens
// DO NOT hardcode colors — use var(--...) or tailwind token classes
```

**Installation if cva is missing:**
```bash
cd /Users/Naegele/dev/callvault && pnpm add class-variance-authority
```

---

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Button variants | Custom per-component classes | shadcn/ui `button.tsx` + cva | Variant inconsistency, drift |
| Tab underline indicator | Custom CSS per page | shadcn/ui `tabs.tsx` with brand spec | Radix handles a11y |
| Font loading | CSS `font-face` declarations | Google Fonts link in `index.html` | Simpler, cached, correct weights |
| Active state detection | Manual pathname parsing per component | `useRouterState()` + `pathname.startsWith()` (already used) | Already correct pattern |

---

## Common Pitfalls

### Pitfall 1: TailwindCSS v4 @theme vs CSS Variables

**What goes wrong:** Adding a color to `:root {}` but not to `@theme {}` — the CSS variable exists but Tailwind can't generate `bg-*` or `text-*` utilities from it.
**How to avoid:** Any color that needs a Tailwind utility class (`bg-vibe-orange`, `text-brand-400`) MUST be in `@theme {}`. Semantic tokens for shadcn/ui go in `@theme inline {}`.

### Pitfall 2: Button Component Missing — Multiple Patterns Exist

**What goes wrong:** V2 currently has multiple inline button implementations with slight differences. Creating a `button.tsx` risks breaking existing pages if not tested.
**How to avoid:** Create the component, then migrate each page's buttons one at a time. Keep old inline classes during transition if needed.

### Pitfall 3: V1 Active Nav Color is Orange Text, V2 Spec Evolved

**What goes wrong:** Blindly copying V1's `text-vibe-orange` for ALL active nav labels without checking if the brand guidelines v4.4 updated this.
**Actual spec:** Brand guidelines v4.4 Navigation & Selection States section: text should be `text-vibe-orange` for active items. V2 SidebarNav currently uses `text-foreground` for active label. This needs to change to match both V1 and the spec.

### Pitfall 4: The Sidebar Collapsed Glossy Icons

**What goes wrong:** The glossy 3D icon effect requires `box-shadow` via `shadow-[...]` arbitrary values. Tailwind v4 handles these differently — need to verify the exact syntax.
**How to avoid:** Test the glossy style in isolation first: `bg-gradient-to-br from-white to-gray-200 border border-gray-300/80 shadow-[inset_0_4px_6px_rgba(255,255,255,0.5),inset_0_-4px_6px_rgba(0,0,0,0.08),0_10px_20px_rgba(0,0,0,0.08)]`. This syntax is valid in TailwindCSS v4 arbitrary values.

### Pitfall 5: Font Loading Gaps

**What goes wrong:** `font-montserrat` class is declared in `@theme` but the font may not be loaded in `index.html`. If Montserrat isn't loaded, headings silently fall back to `sans-serif` (system font), which looks correct at a glance but fails side-by-side comparison.
**How to avoid:** Verify `callvault/index.html` has the Google Fonts link for Montserrat:800 and Inter:300,400,500.

---

## Code Examples

### Sidebar Active State — Correct Pattern (per brand-guidelines-v4.4.md)

```tsx
// Source: brand-guidelines-v4.4.md, Navigation & Selection States section
<Link
  className={cn(
    'relative flex items-center gap-3 rounded-lg px-3 py-2',
    'text-sm transition-colors duration-150',
    'focus:outline-none focus-visible:ring-2 focus-visible:ring-ring',
    isCollapsed && 'justify-center px-2 py-2',
    isActive
      ? 'bg-vibe-orange/10 font-semibold text-vibe-orange'  // <-- text-vibe-orange not text-foreground
      : 'text-muted-foreground hover:bg-muted/70',
  )}
>
  {isActive && (
    <span
      className="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-[65%] rounded-r-full bg-vibe-orange"
      aria-hidden="true"
    />
  )}
  <Icon
    size={16}
    className={cn(
      'flex-shrink-0',
      isActive ? 'text-vibe-orange' : 'text-muted-foreground',
    )}
  />
  {!isCollapsed && <span className="truncate">{item.name}</span>}
</Link>
```

### Collapsed Sidebar — Glossy 3D Icon (per brand-guidelines-v4.4.md)

```tsx
// Source: brand-guidelines-v4.4.md, Sidebar Navigation Icons section
// When isCollapsed, each nav icon wraps in:
<div className={cn(
  'w-11 h-11 rounded-xl flex items-center justify-center',
  // Light mode glossy 3D
  'bg-gradient-to-br from-white to-gray-200',
  'border border-gray-300/80',
  'shadow-[inset_0_4px_6px_rgba(255,255,255,0.5),inset_0_-4px_6px_rgba(0,0,0,0.08),0_10px_20px_rgba(0,0,0,0.08)]',
  isActive && 'ring-2 ring-vibe-orange/50',
)}>
  <Icon className="w-5 h-5 text-foreground" />
</div>
// Small orange dot below when active:
{isActive && (
  <div className="w-1.5 h-1.5 rounded-full bg-vibe-orange mx-auto mt-1" />
)}
```

### Primary Button — Slate Gradient (per brand-guidelines-v4.4.md)

```tsx
// Source: brand-guidelines-v4.4.md, Button System section
// variant="default" (primary)
className={cn(
  'h-10 px-6 rounded-xl text-sm font-medium text-white min-w-[120px]',
  // Slate gradient — same light and dark
  'bg-gradient-to-b from-[#627285] to-[#394655]',
  'border border-[rgba(57,70,85,0.8)]',
  '[text-shadow:0_1px_2px_rgba(0,0,0,0.25)]',
  'shadow-[inset_0_4px_6px_rgba(255,255,255,0.25),inset_0_-4px_6px_rgba(0,0,0,0.35),0_10px_20px_rgba(61,74,91,0.2)]',
  'active:translate-y-px active:scale-[0.98]',
  'focus-visible:outline focus-visible:outline-2 focus-visible:outline-vibe-orange focus-visible:outline-offset-2',
)}
```

### Page Section Heading — Vibe Orange (V1 pattern, approved context)

```tsx
// Source: V1 screenshots + brand-guidelines-v4.4.md
// Page headings in V1 use vibe orange for structural navigation emphasis
<h1 className="font-montserrat font-extrabold text-xl uppercase tracking-wide text-vibe-orange">
  All Calls
</h1>
```

Note: This is a structural indicator (the vibe orange signals "you are here"), qualifying as approved context #6 (Wayfinding/Step Indication) or the nav active state pattern. Confirm this against live V1 screenshots before applying — if V1 uses a slightly different approach (e.g., gray heading with orange accent underline), match that instead.

### Tabs Component — Brand Spec (per brand-guidelines-v4.4.md)

```tsx
// Source: brand-guidelines-v4.4.md, Tab Navigation section
// TabsList wrapper
<div className="w-full border-b border-ink dark:border-white">
  <div className="flex items-center justify-start gap-6">
    {/* tab triggers */}
  </div>
</div>

// TabsTrigger active state
'relative px-0 pb-3 pt-0 m-0',
'text-sm font-light uppercase text-muted-foreground',
'data-[state=active]:font-semibold data-[state=active]:text-foreground',
// Orange pill:
'data-[state=active]:after:absolute data-[state=active]:after:bottom-0',
'data-[state=active]:after:left-0 data-[state=active]:after:right-0',
'data-[state=active]:after:h-[6px] data-[state=active]:after:bg-vibe-orange',
'data-[state=active]:after:rounded-full data-[state=active]:after:content-[\'\']',
```

---

## Page-by-Page Gap Summary

| Page | Route | Key Gaps | Priority |
|------|-------|----------|----------|
| **Home/Calls List** | `/_authenticated/` | Page title color, empty state microcopy | HIGH |
| **Call Detail** | `/calls/$callId` | Page title color, tabs (if added) | HIGH |
| **Settings** | `/settings/$category` | Sidebar active state (no pill/orange), page title | HIGH |
| **Import** | `/import/` | Mostly correct tab styling; verify source cards | MEDIUM |
| **Workspaces** | `/workspaces/` | V2-only; org sidebar active state, workspace cards | MEDIUM |
| **Workspace Detail** | `/workspaces/$workspaceId` | V2-only; needs visual audit | MEDIUM |
| **Login** | `/login` | Button gradient implementation fine (ad-hoc but correct) | LOW |
| **SidebarNav** | All pages | Collapsed glossy icons, active text color | HIGH |
| **WorkspaceSidebarPane** | Home/Detail | Folder active state (no pill indicator) | MEDIUM |

---

## V1 Pages NOT Carried Forward (Out of Scope)

Confirmed dropped in V2 per CONTEXT.md:
- AI Chat (`/chat` in V1) — not in V2 routes
- Content Hub — not in V2 routes
- Hubs — not in V2 routes
- Analytics — not in V2 routes

---

## Files to Read Before Planning Tasks

The planner should read these files to understand full context:

```
V2 source (to modify):
/Users/Naegele/dev/callvault/src/globals.css
/Users/Naegele/dev/callvault/src/components/layout/SidebarNav.tsx
/Users/Naegele/dev/callvault/src/components/layout/AppShell.tsx
/Users/Naegele/dev/callvault/src/components/layout/OrgSwitcherBar.tsx
/Users/Naegele/dev/callvault/src/components/layout/WorkspaceSidebarPane.tsx
/Users/Naegele/dev/callvault/src/routes/_authenticated/index.tsx
/Users/Naegele/dev/callvault/src/routes/_authenticated/calls/$callId.tsx
/Users/Naegele/dev/callvault/src/routes/_authenticated/settings/$category.tsx
/Users/Naegele/dev/callvault/src/routes/_authenticated/import/index.tsx
/Users/Naegele/dev/callvault/src/routes/_authenticated/workspaces/index.tsx
/Users/Naegele/dev/callvault/src/routes/login.tsx
/Users/Naegele/dev/callvault/index.html  (check font loading)

Reference (spec):
/Users/Naegele/dev/brain/docs/design/brand-guidelines-v4.4.md
~/.config/claude-code/dev-browser/tmp/v1-01-home.png
~/.config/claude-code/dev-browser/tmp/v1-08-settings.png
~/.config/claude-code/dev-browser/tmp/v1-09-import.png
```

---

## Open Questions

1. **Page title in vibe orange — confirmed or inconclusive?**
   - What we know: V1 screenshots show "HOME", "SETTINGS", "TRANSCRIPTS" in vibe orange in the TopBar. In-pane section headings (e.g., "ACCOUNT" in settings content) appear dark/black.
   - What's unclear: V2 doesn't have a TopBar at all — it has OrgSwitcherBar + in-pane headings. Should the in-pane `<h1>` titles be vibe orange?
   - Recommendation: Screenshot V2 live, compare to V1. If V1's in-pane headings are black (not orange), keep V2 as-is. The orange was in V1's TopBar which V2 doesn't replicate.

2. **Does cva (`class-variance-authority`) need to be installed?**
   - What we know: It's not in `callvault/package.json` (not directly verified in research)
   - Recommendation: Check `callvault/package.json` before creating Button component. If not installed, `pnpm add class-variance-authority`.

3. **SidebarNav layout when expanded — icons in horizontal row?**
   - What we know: Brand guidelines say "Expanded sidebar: Icons in horizontal row with labels" but the V2 SidebarNav currently shows icons in vertical list when expanded (not horizontal).
   - What's unclear: V1 screenshots show vertical list nav with icons + labels side by side (icon-label inline). That's vertical list layout, not horizontal row.
   - Recommendation: The brand guidelines v4.4 sidebar nav section may describe the v1 sidebar-within-hub-card pattern, not the v2 nav rail. Keep V2's vertical list — it's the correct v2 pattern.

4. **`src/components/ui/` directory doesn't exist — shadcn components not initialized?**
   - What we know: No `button.tsx` or other shadcn components found in V2.
   - Recommendation: The planner should start with a task to create `src/components/ui/` and the foundational components needed (button, tabs). These can be hand-written per brand spec rather than using shadcn CLI (which might overwrite globals.css).

---

## Sources

### Primary (HIGH confidence)
- `callvault/src/globals.css` — actual V2 token system, read directly
- `callvault/src/components/layout/SidebarNav.tsx` — actual V2 sidebar code, read directly
- `callvault/src/components/layout/AppShell.tsx` — actual V2 shell code, read directly
- `brain/docs/design/brand-guidelines-v4.4.md` — authoritative spec, sections 1-23 read
- `callvault/CLAUDE.md` — V2 hard constraints, read directly
- V1 screenshots: `~/.config/claude-code/dev-browser/tmp/v1-01-home.png`, `v1-08-settings.png`, `v1-09-import.png` — viewed directly

### Secondary (MEDIUM confidence)
- `callvault/src/routes/_authenticated/index.tsx` — actual home page code
- `callvault/src/routes/_authenticated/settings/$category.tsx` — actual settings code
- `callvault/src/routes/_authenticated/import/index.tsx` — partial read
- `callvault/src/routes/_authenticated/calls/$callId.tsx` — partial read

---

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH — all files read directly
- Gap analysis: HIGH — code vs. spec comparison is concrete
- Architecture: HIGH — both V1 layout and V2 layout understood from source
- Pitfalls: HIGH — based on TailwindCSS v4 constraints documented in callvault/CLAUDE.md

**Research date:** 2026-03-01
**Valid until:** 2026-04-01 (stable design system)

--- END OF RESEARCH ---
