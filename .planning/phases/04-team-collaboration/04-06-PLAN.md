---
phase: 04-team-collaboration
plan: 06
type: execute
wave: 4
depends_on: ["04-01", "04-02", "04-03", "04-04", "04-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can create team and see it in their team list"
    - "Team creator receives shareable join link"
    - "Team join link opens accessible join page at /join/team/:token"
    - "New user can accept team invite and appear in team members list"
    - "Teams appear in top-right dropdown"
    - "Active team context is visible in header"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete team collaboration flow

Purpose: Verify all Phase 4 features work end-to-end before marking phase complete
Output: Confirmed working team creation, invite, join, and team switching experience
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-team-collaboration/04-CONTEXT.md
@.planning/phases/04-team-collaboration/04-01-SUMMARY.md
@.planning/phases/04-team-collaboration/04-02-SUMMARY.md
@.planning/phases/04-team-collaboration/04-03-SUMMARY.md
@.planning/phases/04-team-collaboration/04-04-SUMMARY.md
@.planning/phases/04-team-collaboration/04-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify complete team collaboration flow</name>
  <what-built>
Complete team collaboration feature including:
- Team creation with simplified name-only dialog
- Multi-team support (users can belong to multiple teams)
- Team invite link generation with 7-day expiry
- Team join page at /join/team/:token
- Team switcher in header showing current context
- Pending setup badge for incomplete onboarding
  </what-built>
  <how-to-verify>
**Test 1: Team Creation**
1. Navigate to /team or Settings > Team
2. Click "Create Team"
3. Verify dialog shows ONLY team name field (no admin visibility or domain auto-join fields)
4. Enter a team name and create
5. Verify success toast and team appears in your teams

**Test 2: Team Switcher**
1. Look at top-right header area
2. Verify TeamSwitcher dropdown appears (near avatar)
3. Click it - should show "Personal" and your team(s)
4. Verify current context has checkmark
5. Switch between Personal and Team - verify context updates

**Test 3: Invite Link Generation**
1. Go to your team's management page
2. Generate an invite link
3. Verify URL contains `/join/team/` (NOT `/team/join/`)
4. Copy the link

**Test 4: Join Page Access**
1. Open the invite link in incognito/different browser
2. Verify join page loads at /join/team/:token
3. Verify page shows team name and "who invited" info

**Test 5: Multi-Team Support**
1. Create a second team
2. Verify you can belong to both teams
3. Verify TeamSwitcher shows both teams

**Test 6: Pending Setup Badge (if applicable)**
1. In team member list, check if new members show "Pending setup" badge
2. (This only shows for members who haven't completed onboarding)

**Expected Results:**
- All tests pass
- No 404 errors for invite links
- Team context clearly visible in header
- Smooth switching between Personal and Team workspaces
  </how-to-verify>
  <resume-signal>Type "approved" if all flows work correctly, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 4 success criteria from ROADMAP.md:
1. [x] User can create team and see it in their team list
2. [x] Team creator receives shareable join link
3. [x] Team join link opens accessible join page at `/join/team/:token`
4. [x] New user can accept team invite and appear in team members list

CONTEXT.md decisions verified:
- [x] Collect only team name (minimal friction)
- [x] Users can belong to multiple teams
- [x] Invite links expire after 7 days
- [x] Join page shows team name + who invited
- [x] Teams appear in top-right dropdown
- [x] Clear team badge in header shows current team context
- [x] Personal workspace exists alongside team workspaces
- [x] Admins can see "pending setup" status badge
</verification>

<success_criteria>
- All 6 test scenarios pass
- TEAM-01 and TEAM-02 requirements verified
- All CONTEXT.md decisions honored
- Phase 4 ready to mark complete
</success_criteria>

<output>
After completion, create `.planning/phases/04-team-collaboration/04-06-SUMMARY.md`
</output>
