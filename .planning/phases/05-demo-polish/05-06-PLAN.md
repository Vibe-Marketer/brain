---
phase: 05-demo-polish
plan: 06
type: execute
wave: 2
depends_on: ["05-03", "05-04", "05-05"]
files_modified:
  - docs/help/export-system.md
  - docs/help/deduplication.md
autonomous: true

must_haves:
  truths:
    - "Export documentation covers all 7 formats: PDF, DOCX, TXT, JSON, ZIP, Markdown, CSV"
    - "Export documentation includes single, bulk, and smart export workflows"
    - "Deduplication documentation explains detection criteria (title, time, participants)"
    - "Deduplication documentation includes FAQ section addressing common user concerns"
    - "Documentation uses user-friendly language without technical jargon"
  artifacts:
    - path: "docs/help/export-system.md"
      provides: "User-facing export documentation"
      min_lines: 30
    - path: "docs/help/deduplication.md"
      provides: "User-facing deduplication documentation"
      min_lines: 30
  key_links:
    - from: "docs/help/export-system.md"
      to: "src/lib/export-utils.ts"
      via: "Documents features"
      pattern: "PDF|DOCX|TXT|JSON"
---

<objective>
Document export system and multi-source deduplication for user-facing help

Purpose: Per DOC-01 and DOC-02, these features need documentation for marketing/onboarding/help materials. Documentation should explain what users can do, not implementation details.
Output: Two markdown docs ready for user-facing help system
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-demo-polish/05-RESEARCH.md

@src/lib/export-utils.ts
@supabase/functions/_shared/deduplication.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document export system (DOC-01)</name>
  <files>docs/help/export-system.md</files>
  <action>
Create user-facing documentation for the export feature:

```markdown
# Exporting Your Transcripts

CallVault lets you export your transcripts in multiple formats for sharing, backup, or use in other tools.

## Available Formats

### PDF
Best for sharing and printing. Creates a professional document with:
- Call title and date
- Full transcript text
- Summary (if generated)
- Tags

### Word (DOCX)
Editable format for Microsoft Word and Google Docs. Perfect for:
- Adding notes
- Editing content
- Formatting for reports

### Plain Text (TXT)
Simple format compatible with any text editor. Ideal for:
- Quick sharing
- Import into other tools
- Minimal file size

### JSON
Structured data format for developers. Includes:
- All call metadata
- Transcript text
- Tags and folders
- Timestamps

### ZIP Archive
Export multiple transcripts at once. Contains:
- One file per transcript
- Consistent naming
- Your choice of format

### Markdown
Formatted text with headers and structure. Great for:
- Knowledge bases
- Note-taking apps (Notion, Obsidian)
- Documentation

### CSV
Spreadsheet format for data analysis. Includes:
- Call metadata in columns
- Easy filtering and sorting
- Bulk analysis

## How to Export

### Single Transcript
1. Open the transcript detail view
2. Click the **Export** button in the header
3. Choose your format
4. File downloads automatically

### Multiple Transcripts
1. Select transcripts using checkboxes
2. Bulk action panel appears
3. Click **Export** dropdown
4. Choose format (files bundled as ZIP if multiple)

### Smart Export
For AI-powered summaries and insights:
1. Select transcript(s)
2. Click **Smart Export**
3. Choose what to include (summary, action items, quotes)
4. Export with enhanced content

## Tips

- **Large exports**: ZIP format recommended for 10+ transcripts
- **Sharing**: PDF creates the most professional appearance
- **Editing**: DOCX preserves formatting while allowing changes
- **Backup**: JSON preserves all data including metadata
```

Create the file at `docs/help/export-system.md`
  </action>
  <verify>
    - File exists at docs/help/export-system.md
    - Contains all export formats (PDF, DOCX, TXT, JSON, ZIP, Markdown, CSV)
    - User-friendly language (no technical jargon)
  </verify>
  <done>
    Export documentation complete for help system
  </done>
</task>

<task type="auto">
  <name>Task 2: Document deduplication (DOC-02)</name>
  <files>docs/help/deduplication.md</files>
  <action>
Create user-facing documentation explaining how CallVault handles duplicates:

```markdown
# How CallVault Handles Duplicate Calls

When you connect multiple recording sources (Zoom, Google Meet, Fathom, etc.), CallVault automatically detects and merges duplicate recordings of the same meeting.

## Why Duplicates Happen

You might have the same call recorded in multiple places:
- Fathom recorded the call AND Zoom cloud recording was enabled
- You manually uploaded a recording that was already synced
- Multiple team members recorded the same meeting

Without deduplication, you'd see the same meeting multiple times in your library.

## How Detection Works

CallVault identifies duplicates by comparing:
- **Meeting title** (similar names indicate same meeting)
- **Time overlap** (recordings that cover the same time period)
- **Participants** (same people in the meeting)

Meetings are flagged as duplicates when they match on multiple criteria.

## What Happens to Duplicates

When duplicates are detected:
1. **One primary recording is kept visible** in your library
2. **Other versions are linked** to the primary
3. **You can still access all versions** if needed

### Which Version is Primary?

CallVault chooses the best version based on:
- **Longest transcript** - More content is better
- **Most recent sync** - Newer data may be more complete
- **Platform priority** - Some sources provide richer metadata

## Viewing All Versions

If you want to see all recordings of a meeting:
1. Open the call detail view
2. Look for "X linked recordings" indicator
3. Click to expand and see all versions
4. Switch primary version if preferred

## Manual Control

You can manually:
- **Unlink recordings** if they're not actually duplicates
- **Link recordings** that weren't auto-detected
- **Choose which version is primary**

## FAQ

**Q: Will I lose any data?**
A: No. All versions are preserved. Deduplication only controls which version appears in your main library.

**Q: Can I turn off deduplication?**
A: Currently, deduplication runs automatically. You can unlink any incorrectly merged recordings.

**Q: What if the wrong version is primary?**
A: Open call details and select your preferred version as primary.
```

Create the file at `docs/help/deduplication.md`
  </action>
  <verify>
    - File exists at docs/help/deduplication.md
    - Explains deduplication in user-friendly terms
    - Covers detection, resolution, and manual control
    - No technical implementation details exposed
  </verify>
  <done>
    Deduplication documentation complete for help system
  </done>
</task>

</tasks>

<verification>
1. Both files exist in docs/help/
2. Documentation is user-friendly (non-technical language)
3. Covers all user-facing aspects of each feature
4. Ready for integration into help/onboarding materials
</verification>

<success_criteria>
- DOC-01 addressed: Export system documented
- DOC-02 addressed: Deduplication documented
- Documentation is accurate to implementation
- Language appropriate for end users
- No development jargon
</success_criteria>

<output>
After completion, create `.planning/phases/05-demo-polish/05-06-SUMMARY.md`
</output>
