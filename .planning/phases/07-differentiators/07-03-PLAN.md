---
phase: 07-differentiators
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - e2e/analytics-data.spec.ts
autonomous: true

must_haves:
  truths:
    - "Analytics tabs show real data from fathom_calls"
    - "No 'placeholder' or hardcoded data in analytics"
  artifacts:
    - path: "e2e/analytics-data.spec.ts"
      provides: "Verification test for analytics data"
  key_links:
    - from: "src/hooks/useCallAnalytics.ts"
      to: "fathom_calls table"
      via: "supabase query"
      pattern: "fathom_calls"
---

<objective>
Verify Real Analytics Data - confirm analytics tabs show real data (per RESEARCH.md, may already be working).

Purpose: DIFF-05 requires analytics tabs show real data. Research indicates useCallAnalytics already queries real data from fathom_calls. This plan verifies the claim and documents any gaps.

Output: Verification test confirming analytics shows real data, or identified gaps for follow-up.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-differentiators/07-RESEARCH.md

# Analytics implementation to verify
@src/hooks/useCallAnalytics.ts
@src/components/analytics/AnalyticsTab.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify analytics implementation and create verification test</name>
  <files>
    e2e/analytics-data.spec.ts
    src/hooks/useCallAnalytics.ts
    src/components/analytics/AnalyticsTab.tsx
  </files>
  <action>
1. Read and analyze existing analytics implementation:
   - `src/hooks/useCallAnalytics.ts` - Check what data is queried and returned
   - `src/components/analytics/AnalyticsTab.tsx` - Check how data is displayed
   - Identify any placeholders, hardcoded values, or TODO comments

2. Create verification test `e2e/analytics-data.spec.ts`:
   ```typescript
   import { test, expect } from '@playwright/test';
   
   test.describe('Analytics Real Data Verification', () => {
     test.beforeEach(async ({ page }) => {
       // Login as test user with known data
       // Navigate to analytics page
     });
     
     test('analytics page shows real call data', async ({ page }) => {
       await page.goto('/analytics'); // or wherever analytics lives
       
       // Verify no placeholder text
       await expect(page.getByText('placeholder', { exact: false })).not.toBeVisible();
       await expect(page.getByText('Coming soon', { exact: false })).not.toBeVisible();
       
       // Verify real data elements exist
       await expect(page.getByTestId('total-calls')).toBeVisible();
       await expect(page.getByTestId('call-duration-chart')).toBeVisible();
       
       // Verify numbers are dynamic (not hardcoded)
       const totalCalls = await page.getByTestId('total-calls').textContent();
       expect(parseInt(totalCalls || '0')).toBeGreaterThanOrEqual(0);
     });
     
     test('analytics charts render with data', async ({ page }) => {
       await page.goto('/analytics');
       
       // Check that chart components render
       // Look for Recharts SVG elements or chart containers
       const charts = page.locator('.recharts-wrapper, [data-chart]');
       await expect(charts.first()).toBeVisible();
     });
   });
   ```

3. Run the test to verify current state:
   - If passes: Analytics is wired to real data (DIFF-05 complete)
   - If fails: Document specific gaps and either fix inline or note for follow-up

4. If gaps found, minor fixes can be done inline:
   - Replace hardcoded values with hook data
   - Wire missing data points
   - Remove placeholder text
  </action>
  <verify>
Run test: `npx playwright test e2e/analytics-data.spec.ts`
Test should pass confirming analytics shows real data.
  </verify>
  <done>
Analytics tabs verified to show real data from fathom_calls. Any gaps identified and either fixed or documented.
  </done>
</task>

</tasks>

<verification>
1. useCallAnalytics hook queries fathom_calls table
2. AnalyticsTab renders data from the hook
3. No placeholder text visible in analytics
4. Charts display real metrics from user's calls
5. Verification test passes
</verification>

<success_criteria>
- Analytics tabs show real data (not placeholders)
- Test confirms data comes from fathom_calls
- DIFF-05 requirement satisfied or gaps documented
</success_criteria>

<output>
After completion, create `.planning/phases/07-differentiators/07-03-SUMMARY.md`
</output>
