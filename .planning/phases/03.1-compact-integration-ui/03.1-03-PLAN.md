---
phase: 03.1-compact-integration-ui
plan: 03
type: execute
wave: 3
depends_on: ["03.1-02"]
files_modified:
  - src/components/sync/IntegrationSyncPane.tsx
autonomous: false

must_haves:
  truths:
    - "Sync page shows integrations as compact buttons instead of large cards"
    - "Compact buttons fit 6+ in a single row"
    - "Clicking any button opens the IntegrationConnectModal"
    - "Modal works correctly for both connected and disconnected integrations"
    - "Settings > Integrations page still works with list format"
  artifacts:
    - path: "src/components/sync/IntegrationSyncPane.tsx"
      provides: "Updated Sync pane with compact integration buttons"
      exports: ["IntegrationSyncPane"]
  key_links:
    - from: "src/components/sync/IntegrationSyncPane.tsx"
      to: "src/components/integrations/IntegrationButtonGroup.tsx"
      via: "renders button group"
      pattern: "IntegrationButtonGroup"
    - from: "src/components/sync/IntegrationSyncPane.tsx"
      to: "src/components/integrations/IntegrationConnectModal.tsx"
      via: "renders modal"
      pattern: "IntegrationConnectModal"
---

<objective>
Wire up the compact integration UI on the Sync page by updating IntegrationSyncPane to use the new IntegrationButtonGroup and IntegrationConnectModal components.

Purpose: Replace the current large card layout with compact buttons, achieving the phase goal of fitting 6+ integrations in a row while maintaining full connection/disconnection functionality.

Output: Updated IntegrationSyncPane that uses the new compact component system, plus visual verification.
</objective>

<execution_context>
@~/.config/Claude/get-shit-done/workflows/execute-plan.md
@~/.config/Claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03.1-compact-integration-ui/03.1-CONTEXT.md
@.planning/phases/03.1-compact-integration-ui/03.1-01-SUMMARY.md
@.planning/phases/03.1-compact-integration-ui/03.1-02-SUMMARY.md

@src/components/sync/IntegrationSyncPane.tsx
@src/components/integrations/IntegrationButtonGroup.tsx
@src/components/integrations/IntegrationConnectModal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update IntegrationSyncPane with compact UI</name>
  <files>src/components/sync/IntegrationSyncPane.tsx</files>
  <action>
Replace the current IntegrationManager-based implementation with the new compact button system.

Current implementation (to be replaced):
```tsx
export function IntegrationSyncPane({ onIntegrationChange }: IntegrationSyncPaneProps) {
  return (
    <IntegrationManager
      onIntegrationChange={onIntegrationChange}
      variant="compact"
      showCard={true}
      title="Integrations"
    />
  );
}
```

New implementation:
```tsx
import { IntegrationButtonGroup } from "@/components/integrations/IntegrationButtonGroup";
import { IntegrationConnectModal } from "@/components/integrations/IntegrationConnectModal";

export type IntegrationPlatform = "fathom" | "google_meet" | "zoom";

interface IntegrationSyncPaneProps {
  onIntegrationChange?: () => void;
}

/**
 * IntegrationSyncPane - Compact integration buttons for the Sync page
 *
 * Displays integrations as compact 56px buttons in a horizontal row.
 * Clicking any button opens the IntegrationConnectModal for connect/disconnect.
 *
 * @brand-version v4.2
 */
export function IntegrationSyncPane({ onIntegrationChange }: IntegrationSyncPaneProps) {
  return (
    <>
      <IntegrationButtonGroup onIntegrationChange={onIntegrationChange} />
      <IntegrationConnectModal onConnectionChange={onIntegrationChange} />
    </>
  );
}
```

Key changes:
1. Remove IntegrationManager import
2. Add IntegrationButtonGroup and IntegrationConnectModal imports
3. Render both components (modal at root level to avoid z-index issues)
4. Keep the IntegrationPlatform type export for backwards compatibility
5. Pass onIntegrationChange to both components

Note: The IntegrationConnectModal reads its state from the Zustand store, so it doesn't need props for open/platform - it's fully controlled by the store.
  </action>
  <verify>
- File updated at src/components/sync/IntegrationSyncPane.tsx
- TypeScript compiles: `npx tsc --noEmit src/components/sync/IntegrationSyncPane.tsx`
- No longer imports IntegrationManager
- Imports IntegrationButtonGroup and IntegrationConnectModal
- Renders both components
  </verify>
  <done>
IntegrationSyncPane updated to use compact button system:
- Renders IntegrationButtonGroup for compact buttons
- Renders IntegrationConnectModal for connection flows
- Settings page (IntegrationManager) remains unchanged
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete compact integration UI system:
1. Compact 56px buttons with green/red ring state indicators
2. Connected buttons show checkmark and info badges
3. Disconnected buttons show reduced opacity and grayscale
4. Modal opens on click with connect/disconnect options
5. Button group fits 6+ integrations in a row
  </what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Navigate to http://localhost:8080/sync (Import/Sync page)
3. Verify integrations display as compact square buttons (not large cards)
4. Check connected integration (if any):
   - Green ring visible around button
   - Green checkmark badge in bottom-right corner
   - Info icon in top-right corner
   - Hover shows tooltip with email and last synced
5. Check disconnected integration:
   - Red/muted ring visible
   - Reduced opacity (grayed out)
   - No badges
   - Hover shows "Click to connect"
6. Click a disconnected integration:
   - Modal opens
   - Shows InlineConnectionWizard with OAuth button
   - Cancel button closes modal
7. Click a connected integration:
   - Modal opens
   - Shows "Connected as [email]"
   - Shows "Last synced: X ago"
   - Shows "Manage in Settings" and "Disconnect" buttons
   - "Manage in Settings" navigates to /settings/integrations
8. Verify 6+ buttons would fit:
   - With 3 integrations + gap-2 spacing, there's room for 3 more
9. Navigate to Settings > Integrations:
   - Verify it still shows the list format (not compact buttons)
   - No regression on Settings page
  </how-to-verify>
  <resume-signal>Type "approved" to complete phase, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Final phase verification:
1. Sync page shows compact integration buttons
2. Connected/disconnected states clearly distinguishable
3. Modal opens correctly for both states
4. Settings > Integrations still works with list format
5. No TypeScript errors
6. No console errors
</verification>

<success_criteria>
1. IntegrationSyncPane uses IntegrationButtonGroup + IntegrationConnectModal
2. Compact buttons display at 56px with proper ring states
3. Connected buttons have green ring + checkmark + info badges
4. Disconnected buttons have red ring + opacity + grayscale
5. Clicking button opens modal with appropriate content
6. Modal connect flow triggers OAuth redirect
7. Modal disconnect shows account info and buttons
8. Settings > Integrations page unchanged (still uses IntegrationManager)
9. Build passes with no errors
10. User verifies visual implementation matches design intent
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-compact-integration-ui/03.1-03-SUMMARY.md`
</output>
